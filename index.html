<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <title>MINES</title>
  <style type="text/css" id="operaUserStyle"></style>
</head>

<body>
<input type="hidden" id="language" value="english" />

<!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä -->
<div class="progress-container" id="progress-container" style="display: none;">
  <div class="progress-bar" id="progress-bar"></div>
  <div class="progress-text" id="progress-text">0%</div>
</div>

<!-- Language Selection Screen -->
<div id="language-screen" class="verification-container">
  <div class="crack crack1" style="left: 42vw; top: 2vh; rotate: 95deg; scale: 1.5;">
    <img src="crack1.svg" alt="crack">
  </div>
  <div class="crack crack2" style="left: 0vw; top: 34vh; rotate: 360deg;">
    <img src="crack1.svg" alt="crack">
  </div>
  <div class="crack crack3" style="left: 81vw; rotate: 227deg;">
    <img src="crack1.svg" alt="crack">
  </div>

  <div class="header">
    <img class="img-footer" src="footer.webp" alt="footer">
  </div>

  <div class="verification-content">
    <div class="text-top">
      <h1 class="text-title">MINES</h1>
      <p class="text-subtitle">Select Language / Piliin ang Wika</p>
    </div>

    <div class="verification-form">
      <button class="verify-button" onclick="selectLanguage('english')">üá∫üá∏ English</button>
      <button class="verify-button" onclick="selectLanguage('filipino')">üáµüá≠ Filipino</button>
    </div>
  </div>

  <div class="footer">
    <img class="img-footer" src="footer.webp" alt="footer">
  </div>
</div>

<!-- Main Game Screen -->
<div id="main-game" style="display: none;">
  <a href="javascript:showLanguageScreen()" class="BackArrow">
    <svg id="backArrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="60" height="60">
      <defs>
        <linearGradient id="arrow-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" stop-color="#00ffe1">
            <animate attributeName="offset" values="0;1;0" dur="2s" repeatCount="indefinite" />
          </stop>
          <stop offset="100%" stop-color="#ffffff">
            <animate attributeName="offset" values="1;0;1" dur="2s" repeatCount="indefinite" />
          </stop>
        </linearGradient>
      </defs>
      <path d="M 30 10 L 15 25 L 30 40" fill="none" stroke="url(#arrow-gradient)" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </a>

  <div class="item-traps select-index-box">
    <img src="bomb.png" alt="">
    <a id="select-index">3</a>
  </div>

  <div class="header">
    <img class="img-footer" src="footer.webp" alt="footer">
  </div>

  <div class="game-container">
    <div class="crack crack1" style="left: 42vw; top: 2vh; rotate: 95deg; scale: 1.5;">
      <img src="crack1.svg" alt="crack">
    </div>
    <div class="crack crack2" style="left: 0vw; top: 34vh; rotate: 360deg;">
      <img src="crack1.svg" alt="crack">
    </div>
    <div class="crack crack3" style="left: 81vw; rotate: 227deg;">
      <img src="crack1.svg" alt="crack">
    </div>
    <div class="crack particles1" style="top: 21vh; left: 2vw; scale: 1.5;">
      <img src="particles.svg" alt="crack">
    </div>
    <div class="crack particles2" style="top: 39vh; left: 82vw; rotate: 288deg;">
      <img src="particles.svg" alt="crack">
    </div>

    <div class="text-top">
      <h1 class="text-title">MINES</h1>
      <p class="name-bot">BOT MADE ONLY FOR 1XBET</p>
    </div>

    <div style="justify-content: center; display: flex; vertical-align: middle;">
      <div class="game-screen">
        <div class="screen-active" id="main-screen">
          <img draggable="false" id="screenStart" class="screenStart" src="Mines.png" alt="start">
          <img draggable="false" src="loading.gif" alt="loading" id="loading" class="loading deactive">
          <canvas class="img-signal deactive" id="canvas"></canvas>
        </div>

        <div class="screen-active" id="traps-screen" style="display: none">
          <div class="traps-screen">
            <div class="item-traps" onclick="handleClick(this)">
              <img src="bomb.png">
              <a>1</a>
            </div>
            <div class="item-traps" onclick="handleClick(this)">
              <img src="bomb.png">
              <a>3</a>
            </div>
            <div class="item-traps" onclick="handleClick(this)">
              <img src="bomb.png">
              <a>5</a>
            </div>
            <div class="item-traps" onclick="handleClick(this)">
              <img src="bomb.png">
              <a>7</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="crack crack4" style="rotate: 40deg;">
      <img src="crack1.svg" alt="crack">
    </div>
    <div class="crack" style="left: 76vw; bottom: 30vh; rotate: 327deg; scale: 1.5;">
      <img src="particles.svg" alt="crack">
    </div>

    <div class="game-button">
      <a id="percent-chance" style="font-size: 3vh; display: none"></a>
      <button id="get-signal" class="get-signal"></button>
      <div id="signal-error" class="signal-error" style="display:none;"></div>
      <div style="display: flex; gap: 2vw;">
        <a href="https://1wzyuh.com/casino/play/1play_1play_mines" class="game-here" target="_blank" rel="noopener noreferrer" id="game-here"></a>
        <a onclick="activeTrapsScreen()" id="chose-traps" class="chose-traps"></a>
      </div>
    </div>
  </div>

  <div class="footer">
    <img class="img-footer" src="footer.webp" alt="footer">
  </div>
</div>

<!-- Verification Modal -->
<div id="verification-modal" class="modal-overlay" style="display: none;">
  <div class="modal-content verification-modal">
    <div class="verification-header">
      <div class="verification-icon">üîê</div>
      <h2 class="verification-title-modal" id="modal-verification-title">ACCOUNT VERIFICATION</h2>
      <p class="verification-subtitle-modal" id="modal-verification-subtitle">Enter your 1xBet account ID to access premium signals</p>
    </div>
    
    <div class="verification-body">
      <div class="input-container">
        <input type="text" id="modal-account-id" class="modal-account-input" placeholder="Enter account ID (132xxxxxxxx)" maxlength="10">
        <div class="input-underline"></div>
      </div>
      <div id="modal-error-message" class="modal-error-message" style="display: none;"></div>
      
      <div class="verification-info">
        <div class="info-item">
          <div class="info-icon">‚ú®</div>
          <span id="info-text-1">Premium signal algorithms</span>
        </div>
        <div class="info-item">
          <div class="info-icon">‚ö°</div>
          <span id="info-text-2">Real-time market analysis</span>
        </div>
        <div class="info-item">
          <div class="info-icon">üéØ</div>
          <span id="info-text-3">95%+ accuracy predictions</span>
        </div>
      </div>
    </div>
    
    <div class="verification-footer">
      <button id="modal-verify-button" class="modal-verify-btn">
        <span id="modal-verify-text">Verify Account</span>
        <div class="button-glow"></div>
      </button>
      <img id="modal-verification-loading" src="loading.gif" alt="loading" class="modal-verification-loading" style="display: none;">
      
      <div class="get-id-section-modal">
        <p class="get-id-instruction-modal" id="modal-get-id-instruction">Don't have an ID? Get it from our bot</p>
        <button id="modal-get-id-button" class="modal-get-id-btn">
          <span id="modal-get-id-text">Get ID</span>
        </button>
      </div>
    </div>
  </div>
</div>

<script src="script.js"></script>
<script src="CanvasMines.js"></script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<script>
  Telegram.WebApp.expand();
  window.Telegram.WebApp.allow_vertical_swipe = false;
  window.Telegram.WebApp.disableVerticalSwipes();
</script>

<script>
  // –ü–æ–ª—É—á–∞–µ–º —è–∑—ã–∫ –∏–∑ —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è
  let userLanguage = document.getElementById("language").value;
  
  // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
  let currentProgress = 0;
  let progressInterval;

  // –¢–µ–∫—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —è–∑—ã–∫–∞
  const texts = {
    english: {
      getSignal: "Get Signal",
      gameHere: "Game Here",
      chooseTraps: "Choose Traps",
      chance: "CHANCE: 90.12%",
      verificationTitle: "ACCOUNT VERIFICATION",
      verificationSubtitle: "Enter your 1xBet account ID to access premium signals",
      verifyButton: "Verify Account",
      verifying: "Verifying...",
      errorMessage: "‚ùó Invalid ID format. ID must start with 132 and contain 10 digits.",
      placeholder: "Enter account ID (132xxxxxxxx)",
      getIdInstruction: "Don't have an ID? Get it from our bot",
      getIdButton: "Get ID",
      progressText: "Progress: ",
      infoText1: "Premium signal algorithms",
      infoText2: "Real-time market analysis",
      infoText3: "95%+ accuracy predictions"
    },
    filipino: {
      getSignal: "Kumuha ng Signal",
      gameHere: "Maglaro Dito",
      chooseTraps: "Piliin ang Traps",
      chance: "PAGKAKATAON: 90.12%",
      verificationTitle: "VERIFICATION NG ACCOUNT",
      verificationSubtitle: "Ilagay ang inyong 1xBet account ID para ma-access ang premium signals",
      verifyButton: "I-verify ang Account",
      verifying: "Nag-ve-verify...",
      errorMessage: "‚ùó Mali ang format ng ID. Dapat magsimula sa 132 at may 10 digits.",
      placeholder: "Ilagay ang account ID (132xxxxxxxx)",
      getIdInstruction: "Walang ID? Kunin sa aming bot",
      getIdButton: "Kunin ang ID",
      progressText: "Progress: ",
      infoText1: "Premium signal algorithms",
      infoText2: "Real-time market analysis",
      infoText3: "95%+ accuracy predictions"
    }
  };

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä–∞
  function updateProgressBar(percent) {
    const progressBar = document.getElementById("progress-bar");
    const progressText = document.getElementById("progress-text");
    const langTexts = texts[userLanguage] || texts.english;
    
    if (progressBar && progressText) {
      progressBar.style.width = percent + "%";
      progressText.textContent = langTexts.progressText + percent + "%";
    }
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä–∞
  function startProgressBar(startPercent, endPercent, duration) {
    if (progressInterval) {
      clearInterval(progressInterval);
    }
    
    document.getElementById("progress-container").style.display = "block";
    currentProgress = startPercent;
    updateProgressBar(currentProgress);
    
    const step = (endPercent - startPercent) / (duration / 100);
    
    progressInterval = setInterval(() => {
      currentProgress += step;
      
      if (currentProgress >= endPercent) {
        currentProgress = endPercent;
        updateProgressBar(currentProgress);
        clearInterval(progressInterval);
        
        // –°–∫—Ä—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä —á–µ—Ä–µ–∑ 500–º—Å –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
        setTimeout(() => {
          document.getElementById("progress-container").style.display = "none";
        }, 500);
      } else {
        updateProgressBar(Math.round(currentProgress));
      }
    }, 100);
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞
  function selectLanguage(language) {
    userLanguage = language;
    document.getElementById("language").value = language;
    localStorage.setItem('selectedLanguage', language);
    setLanguage(language);
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —è–∑—ã–∫–∞
    startProgressBar(0, 100, 2000);
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—É—é –∏–≥—Ä—É —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
    setTimeout(() => {
      showMainGame();
    }, 2000);
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —ç–∫—Ä–∞–Ω–∞ –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞
  function showLanguageScreen() {
    document.getElementById("language-screen").style.display = "block";
    document.getElementById("main-game").style.display = "none";
    document.getElementById("verification-modal").style.display = "none";
    
    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä
    document.getElementById("progress-container").style.display = "none";
    currentProgress = 0;
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –≥–ª–∞–≤–Ω–æ–π –∏–≥—Ä—ã
  function showMainGame() {
    document.getElementById("language-screen").style.display = "none";
    document.getElementById("main-game").style.display = "block";
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
    setTimeout(() => {
      document.getElementById("verification-modal").style.display = "flex";
    }, 1000);
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —è–∑—ã–∫–∞
  function setLanguage(language) {
    const langTexts = texts[language] || texts.english;
    
    // –û—Å–Ω–æ–≤–Ω–∞—è –∏–≥—Ä–∞
    document.getElementById("get-signal").textContent = langTexts.getSignal;
    document.getElementById("game-here").textContent = langTexts.gameHere;
    document.getElementById("chose-traps").textContent = langTexts.chooseTraps;
    document.getElementById("percent-chance").textContent = langTexts.chance;
    
    // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
    document.getElementById("modal-verification-title").textContent = langTexts.verificationTitle;
    document.getElementById("modal-verification-subtitle").textContent = langTexts.verificationSubtitle;
    document.getElementById("modal-verify-text").textContent = langTexts.verifyButton;
    document.getElementById("modal-account-id").placeholder = langTexts.placeholder;
    document.getElementById("modal-get-id-instruction").textContent = langTexts.getIdInstruction;
    document.getElementById("modal-get-id-text").textContent = langTexts.getIdButton;
    document.getElementById("info-text-1").textContent = langTexts.infoText1;
    document.getElementById("info-text-2").textContent = langTexts.infoText2;
    document.getElementById("info-text-3").textContent = langTexts.infoText3;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    if (document.getElementById("progress-text")) {
      const percent = currentProgress || 0;
      document.getElementById("progress-text").textContent = langTexts.progressText + percent + "%";
    }
  }

  // ID Verification Logic
  function validateAccountId(id) {
    const regex = /^132\d{7}$/;
    return regex.test(id);
  }

  function showModalError(message) {
    const errorElement = document.getElementById("modal-error-message");
    errorElement.textContent = message;
    errorElement.style.display = "block";
  }

  function hideModalError() {
    document.getElementById("modal-error-message").style.display = "none";
  }

  function verifyModalAccount() {
    const accountId = document.getElementById("modal-account-id").value;
    const verifyButton = document.getElementById("modal-verify-button");
    const loadingElement = document.getElementById("modal-verification-loading");
    const langTexts = texts[userLanguage] || texts.english;

    hideModalError();

    if (!validateAccountId(accountId)) {
      showModalError(langTexts.errorMessage);
      return;
    }

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
    verifyButton.style.display = "none";
    loadingElement.style.display = "block";

    // –°–∏–º—É–ª–∏—Ä—É–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É (2 —Å–µ–∫—É–Ω–¥—ã), –∑–∞—Ç–µ–º –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    setTimeout(() => {
      document.getElementById("verification-modal").style.display = "none";
      
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
      localStorage.setItem('account_verified', 'true');
      localStorage.setItem('account_id', accountId);
    }, 2000);
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —á–∞—Ç–∞ —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è ID
  function openDeveloperChatForId() {
    const developerUsername = "TsantosI_PH_bot";
    const prefillMessage = "Hi! I want to get my 1xBet ID ‚úÖ";
    const telegramUrl = `https://t.me/${developerUsername}?text=${encodeURIComponent(prefillMessage)}`;
    
    if (window.Telegram && window.Telegram.WebApp) {
      window.Telegram.WebApp.openTelegramLink(telegramUrl);
    } else {
      window.open(telegramUrl, '_blank');
    }
  }

  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
  document.getElementById("modal-verify-button").onclick = verifyModalAccount;
  document.getElementById("modal-get-id-button").onclick = openDeveloperChatForId;
  
  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ Enter –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
  document.getElementById("modal-account-id").addEventListener("keypress", function(event) {
    if (event.key === "Enter") {
      verifyModalAccount();
    }
  });

  // –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –≤–≤–æ–¥–µ
  document.getElementById("modal-account-id").addEventListener("input", function() {
    hideModalError();
  });

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π —è–∑—ã–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
  window.addEventListener('load', function() {
    const savedLanguage = localStorage.getItem('selectedLanguage');
    const accountVerified = localStorage.getItem('account_verified');
    
    if (savedLanguage && texts[savedLanguage]) {
      userLanguage = savedLanguage;
      document.getElementById("language").value = savedLanguage;
      setLanguage(savedLanguage);
      
      if (accountVerified === 'true') {
        showMainGame();
      } else {
        showMainGame();
      }
    } else {
      showLanguageScreen();
    }
  });

  // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
  document.getElementById("verification-modal").addEventListener('click', function(event) {
    if (event.target === this) {
      // –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
    }
  });
</script>
</body>

</html>
